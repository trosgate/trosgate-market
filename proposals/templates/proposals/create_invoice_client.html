{% extends "dashboard/main_base.html" %}
{% load static %}
{% block content%}
{% include 'dashboard/main_sidebar.html' %}

			<!--Main Start-->
			<main id="wt-main" class="wt-main wt-haslayout">

            <section class="wt-haslayout wt-dbsectionspace">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Trosgate Invoice Generator
                        </div>

                        <div class="card-body">

                        <div class="row">
                            <div class="col-lg-12">
                                <h5 class="card-title">Add Client for your invoice
                                <div class="wt-btnarea">
                                    <a href="javascript:void(0);" class="wt-btn" data-toggle="modal" data-target="#invoiceclientmodal">Add Client</a>
                                    <a href="{% url 'invoice:create_invoice' %}" class="wt-btn wt-btnvtwo">Add Invoice</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>										
            </section>

            <section class="wt-haslayout wt-dbsectionspace">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="wt-insightsitem wt-dashboardbox">
                    <div class="card">
                        <div class="card-header">
                            List of invoicing clients
                        </div>

                        <div class="card-body">

                            <div class="row">
                            <div class="col-lg-12">

                            {% if invoice_client|length > 0 %}
                            <div class="table-responsive">
                                <table class="table table-striped table-sm">
                                    <thead>
                                    <tr>

                                        <th>Number</th>
                                        <th>Invoice #</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>address</th>
                                        <th>phone_Number</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for client in invoice_client %}
                                    <tr>
                                    <td>{{forloop.counter}} </td>
                                    <td>{{client.reference}}</td>
                                    <td>{{client.name}}</td>
                                    <td>{{client.email}}</td>
                                    <td>{{client.address}}</td>
                                    <td>{{client.phone_Number}}</td>
                                    </tr>
                                    {% endfor %}

                                    </tbody>
                                </table>
                            </div>
                            {% endif %}

				        </div>				
                    </div>
                </div>										
            </section>

			

            <section class="wt-haslayout wt-dbsectionspace">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            Trosgate Invoice Generator
                        </div>

                        <div class="card-body">

                            <div class="row">
                            <div class="col-lg-12">
                                <h5 class="card-title">Add Products to your invoice
                                <button href="#addProductModal" type="button" class="btn btn-link" data-bs-toggle="modal"> ADD PRODUCT </button>
                                </h5>

                                {% if products|length > 0 %}
                                <div class="table-responsive">
                                <table class="table table-striped table-sm">
                                    <thead>
                                    <tr>

                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Related Invoice</th>

                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for product in products %}
                                    <tr>
                                    <td>{{product.title}}</td>
                                    <td>{{product.description}}</td>
                                    <td>{{product.quantity}}</td>
                                    <td>{{product.currency}} {{product.price}}</td>
                                    <td>{{product.invoice.number}}</td>
                                    </tr>
                                    {% endfor %}

                                    </tbody>
                                </table>
                            </div>
                            {% endif %}

                    </div>
                </div>										
            </section>


				<section class="wt-haslayout wt-dbsectionspace">
					<div class="row">
						<div class="col-12 col-sm-12 col-md-6 col-lg-6">
							<div class="wt-insightsitem wt-dashboardbox">
								<h3 class="is-size-3 mb-4 float-left"> My Projects</h3>
							    <div class="table-responsive">
								  <table class="table">
								    <thead>
								      <tr>
								        <th>Id</th>
								        <th>Title</th>
								        <th>Status</th>
								        <th>Action</th>
								      </tr>
								    </thead>
									{% for project in projects %}									
								    <tbody>
								        <tr>
								          <td>{{forloop.counter}} </td>
								          <td>{{project.title|truncatechars:40}}</td>
								          <td>{{project.get_status_display}}...</td>
								          <td>
								            <a class="btn btn-info" href="{{project.get_project_absolute_url}}">Preview</a>
								            <a class="btn btn-success" href="{{project.get_project_absolute_url}}">Apply</a>
								          </td>
								        </tr> 
								    </tbody>
								  {% endfor %}
								  	</table> 
								{% if not projects %}
									<p><strong>No projects under Review yet.</strong></p>
								{% endif %}									  					
							</div>  
						</div>						
					</div>
						<div class="col-12 col-sm-12 col-md-6 col-lg-6">
							<div class="wt-insightsitem wt-dashboardbox">
								<h3 class="is-size-3 mb-4 float-left"> My Applications</h3> 
							    <div class="table-responsive">
								  <table class="table">
							    <thead>
							      <tr>
							        <th>Id</th>
							        <th>Category</th>
							        <th>Actions</th>
							      </tr>
							    </thead>
							    <tbody>
				
								{% for project in applications %}
							        <tr>
							          <td>{{forloop.counter}} </td>
							          <td>{{project.category}} </td>
							          <td>
								          <a class="btn btn-success" href="view_project">View</a>
								          <a class="btn btn-default btn-warning" href="edit_project">Edit</a>
								          <a class="btn btn-xs btn-danger" href="delete_project">Del</a>
							          </td>
							        </tr> 
							  	{% endfor %}					
							    </tbody>
							  	</table>
								{% if not applications %}
									<p><strong>No Applications to show yet.</strong></p>
								{% endif %}									  
							</div> 
						</div>
					</div>										
				</section>

				<div class="wt-proposalholder">
					<div class="row justify-content-md-center">
						<div class="wt-sectionhead wt-textcenter">
							<span>I am Client</span>
						</div>
					</div>
				</div>
    			{% comment %} {% include 'dashboard/main_footer.html' %} {% endcomment %}
			</main>

			<!-- Add Invoice Client Popup Start-->
			<!-- Popup Start-->
			<div class="modal fade wt-offerpopup" tabindex="-1" role="dialog" id="invoiceclientmodal">
				<div class="modal-dialog" role="document">
					<div class="wt-modalcontent modal-content">
						<div class="wt-popuptitle">
							<h2>Add A Client</h2>
							<a href="javascript%3bvoid(0)%3b.html" class="wt-closebtn close"><i class="fa fa-close" data-dismiss="modal" aria-label="Close"></i></a>
						</div>
						<div class="modal-body">
							<div class="wt-projectdropdown-hold">
								<div class="wt-projectdropdown-option">
									<div class="wt-projectselect">
										<figure><img src="images/thumbnail/img-07.jpg" alt="img description"></figure>
										<div class="wt-projectselect-content">
											<h3>Project Title Here</h3>
											<span><i class="lnr lnr-calendar-full"></i> Project Deadline: May 27, 2019</span>
										</div>
									</div>
								</div>
							</div>
							<form method="POST", action='.', class="wt-formtheme wt-formpopup"> {% csrf_token %}
								<div class="form-group">
									{{invoiceclientform.name.label}}
									{{invoiceclientform.name}}
								</div>
								<div class="form-group">
									{{invoiceclientform.email.label}}
									{{invoiceclientform.email}}
								</div>
								<div class="form-group">
									{{invoiceclientform.address.label}}
									{{invoiceclientform.address}}
								</div>
								<div class="form-group">
									{{invoiceclientform.postal_code.label}}
									{{invoiceclientform.postal_code}}
								</div>  
								<div class="form-group">
									{{invoiceclientform.phone_Number.label}}
									{{invoiceclientform.phone_Number}}
								</div>
								<div class="form-group">
									{{invoiceclientform.tax_Number.label}}
									{{invoiceclientform.tax_Number}}
								</div>                                                                
								<div class="form-group wt-btnarea">
									<button type="submit" class="wt-btn"> Add Client </button>
								</div>											
							</form>
						</div>
					</div>
				</div>
			</div>
			<!-- Popup End-->

{% endblock %}

